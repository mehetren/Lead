name: robot_test

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

permissions:
  contents: read
env:
  CUMULUSCI_ROBOT_FRAMEWORK: cumulusci.robotframework.Salesforce.robot
  CUMULUSCI_SERVICE_github: ${{ secrets.CUMULUSCI_SERVICE_github }}
jobs:
  test:

    runs-on: ubuntu-latest

    steps:
        # Install Salesforce CLI
        - name: Install Salesforce CLI
          run: |
            wget https://developer.salesforce.com/media/salesforce-cli/sfdx-linux-amd64.tar.xz
            mkdir sfdx-cli
            tar xJf sfdx-linux-amd64.tar.xz -C sfdx-cli --strip-components 1
            ./sfdx-cli/install

        # Checkout the code in the pull request
        - name: 'Checkout source code'
          uses: actions/checkout@v2

#         # Create Comment with Scratch Org URL
#         - name: Add Comment with Scratch Org URL
#           id: login
# #           uses: dyno-dev/sfdx-scratch-org-login-url-action

#         # Add Comment with Scratch Org URL
#         - uses: marocchino/sticky-pull-request-comment@v2
#           with:
#             GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
#             message: |
#               Review package - [Scratch Org](${{steps.login.outputs.login-url}})
